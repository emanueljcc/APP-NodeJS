function pieChart(){function t(){if(c=document.getElementById("chart"),void 0!==c.getContext){f=c.width,d=c.height,g=f/2.5,v=d/2,u=Math.min(f,d)/2*(M/100);var t=-1,r=0;$("#chartData td").each(function(){if(++r%2!=0)t++,E[t]=[],E[t].label=$(this).text();else{var a=parseFloat($(this).text());O+=a,a=a.toFixed(2),E[t].value=a}if($(this).data("slice",t),$(this).click(e),rgb=$(this).css("color").match(/rgb\((\d+), (\d+), (\d+)/))L[t]=[rgb[1],rgb[2],rgb[3]];else{if(!(hex=$(this).css("color").match(/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/)))return void alert("Error: Colour'");L[t]=[parseInt(hex[1],16),parseInt(hex[2],16),parseInt(hex[3],16)]}});var i=0;for(var n in E)E[n].startAngle=2*Math.PI*i,E[n].endAngle=2*Math.PI*(i+E[n].value/O),i+=E[n].value/O;o(),$("#chart").click(a)}}function a(t){var a=t.pageX-this.offsetLeft,e=t.pageY-this.offsetTop,i=a-g,n=e-v;if(Math.sqrt(Math.pow(Math.abs(i),2)+Math.pow(Math.abs(n),2))<=u){var o=Math.atan2(n,i)-F;0>o&&(o=2*Math.PI+o);for(var l in E)if(o>=E[l].startAngle&&o<=E[l].endAngle)return void r(l)}s()}function e(t){r($(this).data("slice"))}function r(t){t==q?s():i(t)}function i(t){if(q!=t){q=t,j=0,clearInterval(B),B=setInterval(function(){n(t)},A),$("#chartData td").removeClass("highlight");var a=$("#chartData td:eq("+2*t+")"),e=$("#chartData td:eq("+(2*t+1)+")");a.addClass("highlight"),e.addClass("highlight")}}function n(t){return(j+=I)>=C?void clearInterval(B):void o()}function s(){q=-1,j=0,clearInterval(B),o(),$("#chartData td").removeClass("highlight")}function o(){var t=c.getContext("2d");t.clearRect(0,0,f,d);for(var a in E)a!=q&&l(t,a);-1!=q&&l(t,q)}function l(t,a){var e=E[a].startAngle+F,r=E[a].endAngle+F;if(a==q){var i=(e+r)/2,n=j*h(j/C,.8);startX=g+Math.cos(i)*n,startY=v+Math.sin(i)*n,t.fillStyle="rgb("+L[a].join(",")+")",t.textAlign="center",t.font=m,t.fillText(E[a].label,g+Math.cos(i)*(u+C+w),v+Math.sin(i)*(u+C+w)),t.font=S,t.fillText(T+E[a].value+" ("+parseInt(E[a].value/O*100+.5)+"%)",g+Math.cos(i)*(u+C+w),v+Math.sin(i)*(u+C+w)+20),t.shadowOffsetX=Y,t.shadowOffsetY=P,t.shadowBlur=k}else startX=g,startY=v;var s=t.createLinearGradient(0,0,.75*f,.75*d);s.addColorStop(0,x),s.addColorStop(1,"rgb("+L[a].join(",")+")"),t.beginPath(),t.moveTo(startX,startY),t.arc(startX,startY,u,e,r,!1),t.lineTo(startX,startY),t.closePath(),t.fillStyle=s,t.shadowColor=a==q?X:"rgba( 0, 0, 0, 0 )",t.fill(),t.shadowColor="rgba( 0, 0, 0, 0 )",a==q?(t.lineWidth=y,t.strokeStyle=D):(t.lineWidth=b,t.strokeStyle=p),t.stroke()}function h(t,a){return Math.pow(1-t,a)+1}var c,f,d,g,v,u,M=40,b=1,p="#fff",x="#ddd",C=25,I=4,A=40,w=65,m="bold 14px 'Trebuchet MS', Verdana, sans-serif",S="bold 12px 'Trebuchet MS', Verdana, sans-serif",T="R$ ",X="rgba( 0, 0, 0, .5 )",Y=8,P=8,k=5,y=2,D="#333",F=-.5*Math.PI,q=-1,j=0,B=0,E=[],L=[],O=0;t()}$(pieChart);